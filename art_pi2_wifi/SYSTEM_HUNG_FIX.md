# ç³»ç»Ÿå¡æ­»/æ— å“åº” è§£å†³æ–¹æ¡ˆ

## ğŸš¨ ç—‡çŠ¶

- ç»ˆç«¯æ— æ³•è¾“å…¥å‘½ä»¤
- ç³»ç»ŸæŒ‚èµ·/å†»ç»“
- ä¸²å£æ— å“åº”

## ğŸ’¥ åŸå› 

**å†…å­˜è€—å°½å¯¼è‡´ç³»ç»Ÿå´©æºƒæˆ–æŒ‚èµ·**

å½“ç³»ç»Ÿå°è¯•åˆ†é…å¤§å—å†…å­˜ï¼ˆå¦‚32KB HTTPç¼“å†²åŒºï¼‰å¤±è´¥æ—¶ï¼Œå¯èƒ½å¯¼è‡´ï¼š
- çº¿ç¨‹é˜»å¡
- ç³»ç»ŸæŒ‚èµ·
- çœ‹é—¨ç‹—è¶…æ—¶

## âœ… ç«‹å³è§£å†³æ­¥éª¤

### æ­¥éª¤1ï¼šç¡¬ä»¶é‡å¯

**æ–¹æ³•Aï¼šæŒ‰å¤ä½æŒ‰é’®**
- æ‰¾åˆ°å¼€å‘æ¿ä¸Šçš„ RESET/RST æŒ‰é’®
- æŒ‰ä¸‹å¹¶é‡Šæ”¾

**æ–¹æ³•Bï¼šé‡æ–°ä¸Šç”µ**
- æ‹”æ‰USBçº¿
- ç­‰å¾…3ç§’
- é‡æ–°æ’å…¥USBçº¿

### æ­¥éª¤2ï¼šæ£€æŸ¥å†…å­˜

ç³»ç»Ÿé‡å¯åï¼Œ**ç«‹å³**è¿è¡Œï¼š

```bash
msh> free
```

**æœŸæœ›è¾“å‡ºï¼š**
```
total    : 262144  (æ€»å†…å­˜ï¼Œå®é™…å€¼çœ‹ä½ çš„æ¿å­)
used     : xxxxxx
free     : xxxxxx  â† è¿™ä¸ªå€¼å¾ˆé‡è¦ï¼
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- `free` > 100KB : âœ… å†…å­˜å……è¶³ï¼Œå¯ä»¥æµ‹è¯•
- `free` = 70-100KB : âš ï¸ å†…å­˜ç´§å¼ ï¼Œå¯èƒ½å¤±è´¥
- `free` < 70KB : âŒ å†…å­˜ä¸è¶³ï¼Œå¿…é¡»ä¼˜åŒ–

### æ­¥éª¤3ï¼šæ ¹æ®å†…å­˜æƒ…å†µå†³å®š

#### å¦‚æœ free > 100KB

```bash
# ç›´æ¥æµ‹è¯•
msh> ai_say ä½ å¥½
```

#### å¦‚æœ free = 70-100KB

```bash
# ä¸å¯åŠ¨è¯­éŸ³åŠ©æ‰‹ï¼Œåªæµ‹è¯•AI
msh> ai_say ä½ å¥½
```

#### å¦‚æœ free < 70KB

**å¿…é¡»é‡æ–°ç¼–è¯‘ï¼** æˆ‘å·²ç»ä¼˜åŒ–äº†ä»£ç ã€‚

## ğŸ”§ é‡æ–°ç¼–è¯‘ï¼ˆå¿…é¡»ï¼ï¼‰

### Windows:

```powershell
cd d:\RT-ThreadStudio\workspace\Desktop-voice-assistant\art_pi2_wifi

# æ¸…ç†
scons -c

# é‡æ–°ç¼–è¯‘
scons -j8

# ä¸‹è½½åˆ°å¼€å‘æ¿
```

### Linux/Mac:

```bash
cd /path/to/art_pi2_wifi

# æ¸…ç†
scons -c

# é‡æ–°ç¼–è¯‘
scons -j8

# ä¸‹è½½åˆ°å¼€å‘æ¿
```

## ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

| é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | èŠ‚çœ |
|------|--------|--------|------|
| HTTPç¼“å†²åŒº | 64 KB | 16 KB | 48 KB |
| éŸ³é¢‘é‡‡é›† | 16 KB | 8 KB | 8 KB |
| éŸ³é¢‘æ’­æ”¾ | 16 KB | 8 KB | 8 KB |
| å½•éŸ³æ—¶é•¿ | 5ç§’(160KB) | 3ç§’(96KB) | 64 KB |
| **æ€»èŠ‚çœ** | - | - | **~130 KB** ğŸ‰ |

## ğŸ¯ ç¦ç”¨è‡ªåŠ¨å¯åŠ¨ï¼ˆçœå†…å­˜ï¼‰

æˆ‘å·²ç»ä¿®æ”¹äº†é…ç½®ï¼Œè¯­éŸ³åŠ©æ‰‹ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå†…å­˜ã€‚

**ä¿®æ”¹å†…å®¹ï¼š**
```c
// main.c
#define VOICE_ASSISTANT_AUTO_START  0  // ä»1æ”¹ä¸º0
```

**æ•ˆæœï¼š**
- ç³»ç»Ÿå¯åŠ¨æ—¶ä¸è‡ªåŠ¨åˆå§‹åŒ–è¯­éŸ³åŠ©æ‰‹
- åªæœ‰åœ¨è¿è¡Œ `ai_say` æ—¶æ‰åˆ†é…å†…å­˜
- èŠ‚çœçº¦ 20-30KB å¯åŠ¨æ—¶çš„å†…å­˜å ç”¨

## ğŸ” é‡å¯åè¯Šæ–­å‘½ä»¤

```bash
# 1. æ£€æŸ¥å†…å­˜
msh> free

# 2. æ£€æŸ¥çº¿ç¨‹ï¼ˆçœ‹å“ªäº›åœ¨è¿è¡Œï¼‰
msh> list_thread

# 3. æµ‹è¯•AIï¼ˆä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼‰
msh> ai_say æµ‹è¯•
```

## ğŸ“ é¢„é˜²æªæ–½

### 1. å®šæœŸé‡å¯

é•¿æ—¶é—´è¿è¡Œåï¼Œå†…å­˜å¯èƒ½ç¢ç‰‡åŒ–ï¼Œå»ºè®®å®šæœŸé‡å¯ï¼š

```bash
msh> reboot
```

### 2. ä¸ç”¨æ—¶åœæ­¢æœåŠ¡

```bash
msh> va_stop           # åœæ­¢è¯­éŸ³åŠ©æ‰‹
msh> wakeup_stop       # åœæ­¢å”¤é†’æ£€æµ‹
```

### 3. ç›‘æ§å†…å­˜

å®šæœŸæ£€æŸ¥ï¼š
```bash
msh> free
```

## âš ï¸ å¦‚æœä¼˜åŒ–åä»ç„¶å¡æ­»

### ç»ˆææ–¹æ¡ˆï¼šæœ€å°é…ç½®

ç¼–è¾‘ `voice_assistant_config.h`ï¼š

```c
// ç¦ç”¨å”¤é†’è¯
#define VOICE_WAKEUP_ENABLE     0

// è¿›ä¸€æ­¥å‡å°‘å½•éŸ³æ—¶é•¿
#define VOICE_RECORD_DURATION   2  // æ”¹ä¸º2ç§’

// ç¦ç”¨éŸ³é¢‘ä¿å­˜
#define VOICE_SAVE_AUDIO_FILE   0
```

ç¼–è¾‘ `web_client.c`ï¼š

```c
// å¦‚æœ16KBè¿˜ä¸å¤Ÿï¼Œé™åˆ°8KB
#define HTTP_RESPONSE_MAX   (8 * 1024)  // 8KBï¼ˆæœ€å°å€¼ï¼‰
```

**é‡æ–°ç¼–è¯‘ï¼**

## ğŸ†˜ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

å¯èƒ½æ˜¯ç¡¬ä»¶é™åˆ¶ï¼Œè¯·æ£€æŸ¥ï¼š

### 1. ç¡®è®¤RAMå¤§å°

æŸ¥çœ‹å¼€å‘æ¿è§„æ ¼ï¼š
- ART-Pi2 åº”è¯¥æœ‰ 1MB SRAM
- å¦‚æœå°äº 256KBï¼ŒåŠŸèƒ½å¯èƒ½å—é™

### 2. æ£€æŸ¥æ˜¯å¦å¯ç”¨å¤–éƒ¨RAM

æŸäº›å¼€å‘æ¿æœ‰å¤–éƒ¨PSRAM/SDRAMï¼Œç¡®ä¿å·²å¯ç”¨ï¼š
- æ£€æŸ¥ `rtconfig.h` ä¸­çš„é…ç½®
- æŸ¥çœ‹ç¡¬ä»¶æ–‡æ¡£

### 3. å‡å°‘å…¶ä»–åŠŸèƒ½

å¦‚æœè¿˜è¿è¡Œäº†å…¶ä»–åº”ç”¨ï¼š
- æš‚æ—¶ç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½
- å‡å°‘çº¿ç¨‹æ•°é‡
- é™ä½æ ˆå¤§å°

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ï¼š

1. `free` å‘½ä»¤è¾“å‡º
2. `list_thread` è¾“å‡º
3. å¼€å‘æ¿å‹å·
4. RAMé…ç½®ä¿¡æ¯
5. å®Œæ•´çš„é”™è¯¯æ—¥å¿—

## âœ… æˆåŠŸæ ‡å¿—

ä¼˜åŒ–å¹¶é‡æ–°ç¼–è¯‘åï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```bash
msh> free
total    : 262144
used     : 150000
free     : 112144  âœ… è¶³å¤Ÿäº†ï¼

msh> ai_say ä½ å¥½

========================================
[You] ä½ å¥½
========================================
[D/web.client] Allocated 16384 bytes for HTTP response  âœ…
[I/ai.cloud] Text to speech successful
[AI] Processing completed!
Audio data received: 6400 bytes
Playing audio...
Playback completed!
========================================
```

---

## ğŸ¯ ç°åœ¨å°±åš

1. **ç¡¬ä»¶é‡å¯å¼€å‘æ¿** ï¼ˆæŒ‰RESETæˆ–é‡æ–°ä¸Šç”µï¼‰
2. **è¿è¡Œ `free` æŸ¥çœ‹å†…å­˜**
3. **é‡æ–°ç¼–è¯‘é¡¹ç›®**ï¼ˆä½¿ç”¨ä¼˜åŒ–åçš„ä»£ç ï¼‰
4. **ä¸‹è½½å¹¶æµ‹è¯•**

**ä»£ç å·²ç»ä¼˜åŒ–å¥½äº†ï¼Œé‡æ–°ç¼–è¯‘å³å¯è§£å†³é—®é¢˜ï¼** ğŸš€

